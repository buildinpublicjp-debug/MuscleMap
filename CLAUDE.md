# MuscleMap - Claude Code Rules

> **v2.4 | 2026-02-11**
> ç­‹è‚‰ã®å›å¾©çŠ¶æ…‹ã‚’å¯è¦–åŒ–ã—ã€æœ€é©ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å°ãiOSã‚¢ãƒ—ãƒª

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**MuscleMap**ã¯ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã§åˆºæ¿€ã—ãŸç­‹è‚‰ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å¯è¦–åŒ–ã—ã€å›å¾©çŠ¶æ…‹ã‚’è¿½è·¡ã™ã‚‹iOSã‚¢ãƒ—ãƒªã€‚

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ:** ã€Œç­‹è‚‰ã®çŠ¶æ…‹ãŒè¦‹ãˆã‚‹ã€‚ã ã‹ã‚‰ã€è¿·ã‚ãªã„ã€‚ã€

**æ ¸å¿ƒæ©Ÿèƒ½:**
1. 2D SVGç­‹è‚‰ãƒãƒƒãƒ—ã§21ç­‹è‚‰ã®å›å¾©çŠ¶æ…‹ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ï¼‰
2. ãƒœãƒªãƒ¥ãƒ¼ãƒ ä¿‚æ•°ä»˜ãå›å¾©è¨ˆç®—ï¼ˆã‚»ãƒƒãƒˆæ•°ã§å›å¾©æ™‚é–“ãŒå¤‰å‹•ï¼‰
3. 7æ—¥ä»¥ä¸Šæœªåˆºæ¿€ã®ç­‹è‚‰ã‚’ç´«ã§ç‚¹æ»…è­¦å‘Š
4. ä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼è‡ªå‹•ææ¡ˆï¼ˆå›å¾©ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã§ç”Ÿæˆã€‚ã‚¸ãƒ ã§é–‹ã„ãŸç¬é–“ã«å§‹ã‚ã‚‰ã‚Œã‚‹ï¼‰
5. 80ç¨®ç›®ã®EMGãƒ™ãƒ¼ã‚¹åˆºæ¿€åº¦ãƒãƒƒãƒ”ãƒ³ã‚°
6. 3Déƒ¨ä½è©³ç´°è¡¨ç¤ºï¼ˆRealityKitã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚ã‚Šï¼‰
7. RevenueCatèª²é‡‘ï¼ˆÂ¥980/æœˆã€Â¥7,800/å¹´ã€Â¥12,000è²·ã„åˆ‡ã‚Šï¼‰

**ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ãƒ³:** ã€Œãƒã‚¤ã‚ªãƒ¢ãƒ‹ã‚¿ãƒ¼ Ã— G-SHOCKã€ â€” ãƒ€ãƒ¼ã‚¯åŸºèª¿ã€ãƒ‡ãƒ¼ã‚¿ãŒæµ®ã‹ã³ä¸ŠãŒã‚‹

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| é …ç›® | é¸å®š |
|:---|:---|
| Platform | iOS 17.0+ |
| Language | Swift 5.9+ |
| UI | SwiftUI |
| DB | Swift Data |
| Architecture | MVVM + Repository Pattern |
| 2Däººä½“å›³ | SVGï¼ˆã‚«ã‚¹ã‚¿ãƒ SwiftUI Pathï¼‰ |
| 3Dè¡¨ç¤º | RealityKit |
| èª²é‡‘ | **RevenueCat SDK** |
| 3Dãƒ¢ãƒ‡ãƒ« | TurboSquidï¼ˆUSDZï¼‰ |

---

## å¿…èª­ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. `docs/PRD/MuscleMap_PRD_v2.1.md` â€” **æœ€ã‚‚é‡è¦ã€‚å…¨ä»•æ§˜ãŒå…¥ã£ã¦ã„ã‚‹**
2. `ROADMAP.md` â€” é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

---

## ç”»é¢ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆï¼ˆãªãœã“ã®ç”»é¢ãŒå­˜åœ¨ã™ã‚‹ã‹ï¼‰

> **âš ï¸ UIä¿®æ­£ã‚„æ–°ç”»é¢å®Ÿè£…ã®å‰ã«ã€å¿…ãšãã®ç”»é¢ã®ã€Œå­˜åœ¨ç›®çš„ã€ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã€‚**
> ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã®ä¿®æ­£ã‚’ã™ã‚‹å‰ã«ã€Œã“ã®ç”»é¢ã‚’é–‹ããƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä½•ã‚’æ±‚ã‚ã¦ã„ã‚‹ã‹ï¼Ÿã€ã‚’è€ƒãˆã‚‹ã€‚
> æŠ€è¡“çš„ã«æ­£ã—ãã¦ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›®ç·šã§æ„å‘³ãŒãªã‘ã‚Œã°å¤±æ•—ã€‚

### ãƒ›ãƒ¼ãƒ ç”»é¢
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…**: ã€Œä»Šæ—¥ã©ã“é›ãˆã‚Œã°ã„ã„ï¼Ÿã€ãŒä¸€ç›®ã§ã‚ã‹ã‚‹ã“ã¨
- **ç„¦ç‚¹**: ç­‹è‚‰ãƒãƒƒãƒ—å…¨ä½“ãŒè¦‹ãˆã‚‹ã“ã¨ã€‚å…¨21ç­‹è‚‰ã®å›å¾©çŠ¶æ…‹ãŒä¸€è¦§ã§ãã‚‹ã“ã¨
- **çµ¶å¯¾æ¡ä»¶**: äººä½“å›³ã¯é ­ã‹ã‚‰è¶³å…ˆã¾ã§å®Œå…¨ã«è¡¨ç¤ºã€‚åˆ‡ã‚Œã¦ã¯ã„ã‘ãªã„

### å±¥æ­´ç”»é¢ï¼ˆãƒãƒƒãƒ—è¡¨ç¤ºï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…**: ã€Œæœ€è¿‘ã©ã“ã‚’é›ãˆãŸï¼Ÿãƒãƒ©ãƒ³ã‚¹ã¯ï¼Ÿã€ãŒã‚ã‹ã‚‹ã“ã¨
- **ç„¦ç‚¹**: é›ãˆãŸéƒ¨ä½ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã€‚æœŸé–“å†…ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åˆ†å¸ƒãŒè¦–è¦šçš„ã«ã‚ã‹ã‚‹ã“ã¨
- **çµ¶å¯¾æ¡ä»¶**: äººä½“å›³ã¯é ­ã‹ã‚‰è¶³å…ˆã¾ã§å®Œå…¨ã«è¡¨ç¤ºã€‚ãƒ›ãƒ¼ãƒ ç”»é¢ã¨åŒã˜è¡¨ç¤ºå“è³ªã€‚åˆ‡ã‚ŒãŸã‚Šæ­ªã‚“ã ã‚Šã—ãªã„
- **æ³¨æ„**: ã“ã®ç”»é¢ã®ãƒãƒƒãƒ—ã¯ãƒ›ãƒ¼ãƒ ç”»é¢ã¨åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’åˆ¥è¦–ç‚¹ï¼ˆå±¥æ­´ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼‰ã§è¦‹ã›ã¦ã„ã‚‹ã ã‘ã€‚è¦‹ãŸç›®ã®å“è³ªã¯ãƒ›ãƒ¼ãƒ ç”»é¢ã¨åŒç­‰ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„

### å±¥æ­´ç”»é¢ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…**: ã€Œã„ã¤ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸï¼Ÿé »åº¦ã¯ï¼Ÿã€ãŒã‚ã‹ã‚‹ã“ã¨
- **ç„¦ç‚¹**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä¸Šã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ—¥ãŒè¦–è¦šçš„ã«ç›®ç«‹ã¤ã“ã¨

### å±¥æ­´ç”»é¢ï¼ˆéƒ¨ä½ã‚¿ãƒƒãƒ—â†’ãƒãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…**: ã€Œã“ã®éƒ¨ä½ã€æœ€è¿‘ã©ã‚Œãã‚‰ã„é›ãˆãŸï¼Ÿä½•ã®ç¨®ç›®ã§ï¼Ÿã€ãŒçŸ¥ã‚ŠãŸã„
- **ç„¦ç‚¹**: ãã®éƒ¨ä½ã®çµ±è¨ˆæƒ…å ±ã¨ç¨®ç›®ãƒªã‚¹ãƒˆ
- **çµ¶å¯¾æ¡ä»¶**: 3Dãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã¯è©²å½“éƒ¨ä½ã«ã‚ºãƒ¼ãƒ ã€‚å…¨èº«è¡¨ç¤ºã—ãªã„

### ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆç”»é¢
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…**: ã€Œä»Šã®ã‚»ãƒƒãƒˆã‚’ç´ æ—©ãè¨˜éŒ²ã—ãŸã„ã€
- **ç„¦ç‚¹**: é‡é‡ãƒ»ãƒ¬ãƒƒãƒ—æ•°ã®å…¥åŠ›ã€‚å‰å›ã®è¨˜éŒ²ãŒè¦‹ãˆã‚‹ã“ã¨
- **çµ¶å¯¾æ¡ä»¶**: å…¥åŠ›ã®é‚ªé­”ã«ãªã‚‹UIè¦ç´ ã‚’ç½®ã‹ãªã„ã€‚æœ€å°ã‚¿ãƒƒãƒ—ã§è¨˜éŒ²å®Œäº†

### ç¨®ç›®è¾å…¸
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…**: ã€Œã“ã®ç¨®ç›®ã¯ã©ã“ã«åŠ¹ãï¼Ÿã€ã€Œã“ã®éƒ¨ä½ã‚’é›ãˆã‚‹ç¨®ç›®ã¯ï¼Ÿã€
- **ç„¦ç‚¹**: ç¨®ç›®ã¨éƒ¨ä½ã®é–¢ä¿‚ãŒè¦–è¦šçš„ã«ã‚ã‹ã‚‹ã“ã¨

### å…¨ç”»é¢å…±é€šã®ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

UIå®Ÿè£…ãƒ»ä¿®æ­£ãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã‚’å¿…ãšç¢ºèªã™ã‚‹ï¼š

1. **ç”»é¢ã®å­˜åœ¨ç›®çš„ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹ï¼Ÿ** â€” æŠ€è¡“çš„ã«æ­£ã—ãã¦ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœŸå¾…ã«å¿œãˆã¦ã„ãªã‘ã‚Œã°NG
2. **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¦ç´ ãŒåˆ‡ã‚Œã¦ã„ãªã„ã‹ï¼Ÿ** â€” ã‚¹ã‚¯ã‚·ãƒ§ã‚’æ’®ã£ã¦ã€ç”»é¢ç«¯ã§è¦ç´ ãŒé€”åˆ‡ã‚Œã¦ã„ãªã„ã‹ç¢ºèª
3. **åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ä»–ç”»é¢ã¨å“è³ªãŒåŒç­‰ã‹ï¼Ÿ** â€” ãƒ›ãƒ¼ãƒ ç”»é¢ã®ãƒãƒƒãƒ—ã¨å±¥æ­´ç”»é¢ã®ãƒãƒƒãƒ—ã¯åŒã˜å“è³ªã§ãªã‘ã‚Œã°ãªã‚‰ãªã„
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚Šãã£ã¦æ“ä½œã—ã¦ã¿ãŸã‹ï¼Ÿ** â€” ã€Œè‡ªåˆ†ãŒã‚¸ãƒ ã§ã“ã®ç”»é¢é–‹ã„ãŸã‚‰ã€æ¬²ã—ã„æƒ…å ±ãŒã™ãè¦‹ãˆã‚‹ã‹ï¼Ÿã€

---

## UIãƒ‡ã‚¶ã‚¤ãƒ³åŸå‰‡

> **å…¨UIå®Ÿè£…ã®åˆ¤æ–­åŸºæº–ã€‚æ–°ç”»é¢ãƒ»æ–°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆæ™‚ã«å¿…ãšå‚ç…§ã™ã‚‹ã“ã¨ã€‚**

### åŸºæœ¬æ€æƒ³

| æ€æƒ³ | æ„å‘³ |
|:---|:---|
| **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ** | ãƒ†ã‚­ã‚¹ãƒˆã‚ˆã‚Šè¦–è¦šè¡¨ç¾ã‚’å„ªå…ˆã€‚3Dãƒ¢ãƒ‡ãƒ«ã€è‰²å½©ã€ãƒãƒ£ãƒ¼ãƒˆã§ç›´æ„Ÿçš„ã«ä¼ãˆã‚‹ |
| **æƒ…å ±éšå±¤ã®æ˜ç¢ºåŒ–** | å…¨æƒ…å ±ã‚’åŒç­‰ã«æ‰±ã‚ãªã„ã€‚æœ€é‡è¦ãƒ‡ãƒ¼ã‚¿ã‚’æœ€ã‚‚ç›®ç«‹ãŸã›ã‚‹ |
| **é”æˆæ„Ÿã®æ¼”å‡º** | PRæ›´æ–°ã‚„ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã¯ç¥ç¦ã®ä½“é¨“ã¨ã—ã¦ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ |
| **iOSãƒã‚¤ãƒ†ã‚£ãƒ–æº–æ‹ ** | SwiftUIæ¨™æº–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨HIGã‚’æœ€å¤§é™å°Šé‡ã€‚ç‹¬è‡ªãƒ‘ã‚¿ãƒ¼ãƒ³ã¯æœ€çµ‚æ‰‹æ®µ |

### ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ

- éƒ¨ä½è©³ç´°ãƒ»ç¨®ç›®è©³ç´°ãƒ»ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆã‚µãƒãƒªãƒ¼ãªã©ã€ç‰¹å®šå¯¾è±¡ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ç”»é¢ã§ã¯ã€3Dãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã¾ãŸã¯ç”»åƒã‚’**ç”»é¢ä¸Šéƒ¨ã®æœ€ä½1/3ï¼ˆ33%ï¼‰**ã§å¤§ããè¡¨ç¤ºã™ã‚‹
- ãƒªã‚¹ãƒˆå½¢å¼ã®ç”»é¢ã§ã‚‚ã€å„è¡Œã«ã‚µãƒ ãƒã‚¤ãƒ«/ã‚¢ã‚¤ã‚³ãƒ³ã‚’å¿…ãšé…ç½®ã€‚**ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã®è¡Œã¯ç¦æ­¢**
- ãƒãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ã‚‚åŒã˜ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã€‚ãƒ†ã‚­ã‚¹ãƒˆãƒªã‚¹ãƒˆã ã‘ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã¯ä½œã‚‰ãªã„
- æ—¢å­˜ã®é¡ä¼¼ç”»é¢ï¼ˆä¾‹ï¼šç¨®ç›®è¾å…¸ã®éƒ¨ä½è©³ç´°ï¼‰ãŒã‚ã‚Œã°ã€**ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æµç”¨**ã—ã¦è¦–è¦šçš„ä¸€è²«æ€§ã‚’ä¿ã¤

### æƒ…å ±ãƒ’ã‚¨ãƒ©ãƒ«ã‚­ãƒ¼ï¼ˆãƒ•ã‚©ãƒ³ãƒˆï¼‰

PRãƒ»é‡é‡ãƒ»ã‚»ãƒƒãƒˆæ•°ãªã©ã®é‡è¦æ•°å€¤ã¯ã€å‘¨å›²ãƒ©ãƒ™ãƒ«ã®**2.0å€ä»¥ä¸Š**ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º + `Heavy`/`Black`ã‚¦ã‚§ã‚¤ãƒˆã€‚

```swift
// ä¾‹: PRæ•°å€¤ã®å¼·èª¿
VStack(alignment: .leading) {
    Text("è‡ªå·±ãƒ™ã‚¹ãƒˆ")
        .font(.body)
        .foregroundColor(.mmTextSecondary)
    Text("120 kg")
        .font(.system(size: 48, weight: .heavy))
        .foregroundColor(.mmAccentPrimary)
}
```

**ãƒ•ã‚©ãƒ³ãƒˆéšå±¤ï¼ˆ4æ®µéšï¼‰:**

| ãƒ¬ãƒ™ãƒ« | ç”¨é€” | SwiftUI | ã‚¦ã‚§ã‚¤ãƒˆ |
|:---|:---|:---|:---|
| L1 | ç”»é¢ã‚¿ã‚¤ãƒˆãƒ« | `.largeTitle` | `Heavy` |
| L2 | ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ« | `.title2` | `Bold` |
| L3 | ä¸»è¦æ•°å€¤ãƒ»é …ç›®å | `.title3` | `Bold` |
| L4 | æœ¬æ–‡ãƒ»è£œè¶³ | `.body` / `.caption` | `Regular` |

### ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°ï¼ˆ8ptã‚°ãƒªãƒƒãƒ‰ï¼‰

- ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“: `32pt`
- è¦ç´ é–“: `16pt`
- ã‚³ãƒ³ãƒ†ãƒŠå†…ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°: `16pt`
- ãƒªã‚¹ãƒˆè¡Œã®æœ€å°é«˜ã•: `44pt`ï¼ˆã‚¿ãƒƒãƒ—é ˜åŸŸç¢ºä¿ï¼‰

### ãƒ¢ãƒ¼ãƒ€ãƒ« / ã‚·ãƒ¼ãƒˆ

- ãƒãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ç©æ¥µä½¿ç”¨ï¼ˆ`.presentationDetents([.medium, .large])`ï¼‰
- ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã«**å¿…ãšãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¦ç´ **ã‚’å«ã‚ã‚‹ã€‚ãƒ†ã‚­ã‚¹ãƒˆ+å…¥åŠ›ã ã‘ã®ç„¡å‘³ä¹¾ç‡¥ãƒ¢ãƒ¼ãƒ€ãƒ«ç¦æ­¢
- ãƒ¢ãƒ¼ãƒ€ãƒ«èƒŒæ™¯ã¯`.mmBgSecondary`ï¼ˆãƒ¡ã‚¤ãƒ³ç”»é¢ã¨ã®è¦–è¦šçš„åŒºåˆ¥ï¼‰
- ä¸Šéƒ¨ã«å¤ªå­—ã‚¿ã‚¤ãƒˆãƒ«å¿…é ˆ

```swift
.sheet(isPresented: $isShowing) {
    VStack {
        Text("éƒ¨ä½å")
            .font(.title2).bold()
        // 3Dãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ï¼ˆç”»é¢ã®1/3ä»¥ä¸Šï¼‰
        // çµ±è¨ˆæƒ…å ±
        // ç¨®ç›®ãƒªã‚¹ãƒˆ
    }
    .background(Color.mmBgSecondary)
    .presentationDetents([.medium, .large])
    .presentationDragIndicator(.visible)
}
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†åˆ©ç”¨

- æ–°ç”»é¢å®Ÿè£…å‰ã«ã€**å¿…ãšãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®é¡ä¼¼Viewã‚’æ¤œç´¢**ã™ã‚‹
- é¡ä¼¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚Œã°æµç”¨ã—ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´ã€‚æ–°è¦ä½œæˆã¯æœ€çµ‚æ‰‹æ®µ
- åŒã˜ãƒ‡ãƒ¼ã‚¿ï¼ˆç­‹è‚‰ãƒãƒƒãƒ—ç­‰ï¼‰ã‚’åˆ¥ç”»é¢ã§è¡¨ç¤ºã™ã‚‹å ´åˆã€**æ—¢å­˜ç”»é¢ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°è¨­å®šã‚’å¿…ãšã‚³ãƒ”ãƒ¼**ã™ã‚‹
- ç‰¹ã«ä»¥ä¸‹ã¯æµç”¨å€™è£œã‚’ç¢ºèª:
  - éƒ¨ä½ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« â†’ `Views/MuscleDetail/` é…ä¸‹
  - 3Dãƒ¢ãƒ‡ãƒ«è¡¨ç¤º â†’ `Utilities/ModelLoader.swift`
  - çµ±è¨ˆã‚«ãƒ¼ãƒ‰ â†’ æ—¢å­˜ã®ã‚µãƒãƒªãƒ¼ç³»View

### é”æˆæ„Ÿã®æ¼”å‡º

- **PRæ›´æ–°æ™‚**: ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã§æ•°å€¤è¡¨ç¤º + ã€ŒPRã€ãƒãƒƒã‚¸
- **é€£ç¶šè¨˜éŒ²**: ãƒ›ãƒ¼ãƒ ç”»é¢ã«ã€ŒğŸ”¥ Næ—¥é€£ç¶šã€è¡¨ç¤º
- **ç›®æ¨™é”æˆ**: å°‚ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚·ãƒ¼ãƒˆ + é”æˆãƒãƒƒã‚¸

### NGãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆç¦æ­¢äº‹é …ï¼‰

- âŒ ãƒ†ã‚­ã‚¹ãƒˆã ã‘ã®ãƒªã‚¹ãƒˆç”»é¢ï¼ˆãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¦ç´ ãªã—ï¼‰
- âŒ å…¨è¦ç´ ãŒåŒã‚µã‚¤ã‚ºãƒ»åŒã‚¦ã‚§ã‚¤ãƒˆã®ãƒ•ãƒ©ãƒƒãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- âŒ ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ãŒç”»é¢ã®30%ä»¥ä¸Šã‚’å ã‚ã‚‹
- âŒ ä½™ç™½ã‚¼ãƒ­ã®è©°ã‚è¾¼ã¿ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- âŒ iOSæ¨™æº–ã‹ã‚‰é€¸è„±ã—ãŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- âŒ ç´”ç²‹ãªé»’ï¼ˆ`#000000`ï¼‰ã®èƒŒæ™¯ä½¿ç”¨
- âŒ ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã§ãƒ¡ã‚¤ãƒ³ç”»é¢ã¨åŒã˜èƒŒæ™¯è‰²ã‚’ä½¿ã†ï¼ˆåŒºåˆ¥ãŒã¤ã‹ãªã„ï¼‰
- âŒ æ—¢å­˜ã®é¡ä¼¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç„¡è¦–ã—ã¦æ–°è¦ä½œæˆã™ã‚‹
- âŒ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¦ç´ ï¼ˆäººä½“å›³ã€3Dãƒ¢ãƒ‡ãƒ«ç­‰ï¼‰ãŒç”»é¢ç«¯ã§åˆ‡ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã§å®Œäº†ã¨ã™ã‚‹
- âŒ åŒã˜ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºå“è³ªãŒç”»é¢ã«ã‚ˆã£ã¦ç•°ãªã‚‹ï¼ˆãƒ›ãƒ¼ãƒ ã¨å±¥æ­´ã§ãƒãƒƒãƒ—ã®å“è³ªãŒé•ã†ç­‰ï¼‰

---

## ã‚«ãƒ©ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå®Ÿè£…æ¸ˆã¿ â€” ColorExtensions.swift ã«å®šç¾©ï¼‰

### èƒŒæ™¯

| ç”¨é€” | ã‚³ãƒ¼ãƒ‰ | Hex |
|:---|:---|:---|
| æœ€èƒŒé¢ | `.mmBgPrimary` | `#121212` |
| ã‚«ãƒ¼ãƒ‰ãƒ»ãƒ¢ãƒ¼ãƒ€ãƒ« | `.mmBgSecondary` | `#1E1E1E` |
| æµ®ãä¸ŠãŒã‚‹ã‚«ãƒ¼ãƒ‰ | `.mmBgCard` | `#2A2A2A` |

### ãƒ†ã‚­ã‚¹ãƒˆ

| ç”¨é€” | ã‚³ãƒ¼ãƒ‰ | å‚™è€ƒ |
|:---|:---|:---|
| ä¸»è¦ãƒ†ã‚­ã‚¹ãƒˆ | `.mmTextPrimary` | `Color.white` |
| è£œè¶³ãƒ†ã‚­ã‚¹ãƒˆ | `.mmTextSecondary` | `#B0B0B0`ï¼ˆã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯” 7.4:1ï¼‰ |

### ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ

| ç”¨é€” | ã‚³ãƒ¼ãƒ‰ | Hex |
|:---|:---|:---|
| ãƒ¡ã‚¤ãƒ³ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ | `.mmAccentPrimary` | `#00FFB3`ï¼ˆãƒã‚¤ã‚ªã‚°ãƒªãƒ¼ãƒ³ï¼‰ |
| ã‚µãƒ–ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ | `.mmAccentSecondary` | `#00D4FF`ï¼ˆé›»å…‰ãƒ–ãƒ«ãƒ¼ï¼‰ |
| ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ‘ãƒ¼ãƒ—ãƒ« | `.mmBrandPurple` | `#A020F0` |

### ç­‹è‚‰çŠ¶æ…‹ã‚«ãƒ©ãƒ¼ï¼ˆ3æ®µéš + ç‰¹æ®ŠçŠ¶æ…‹ï¼‰

âš ï¸ **è‰²ã®æ–¹å‘: ãƒ¬ãƒƒãƒ‰(ç–²åŠ´) â†’ ã‚¤ã‚¨ãƒ­ãƒ¼ â†’ ã‚°ãƒªãƒ¼ãƒ³(å›å¾©)ã€‚ä¿¡å·æ©Ÿã¨åŒã˜ã€‚**

| çŠ¶æ…‹ | ã‚³ãƒ¼ãƒ‰ | Hex | å›å¾©% |
|:---|:---|:---|:---|
| ç–²åŠ´ | `.mmMuscleFatigued` | `#FF6B6B` | 0-20% |
| ä¸­é–“ | `.mmMuscleModerate` | `#FFEE58` | 20-80% |
| å›å¾©æ¸ˆã¿ | `.mmMuscleRecovered` | `#00E676` | 80-100% |
| è¨˜éŒ²ãªã— | `.mmMuscleInactive` | `#3D3D42` | â€” |
| æœªåˆºæ¿€è­¦å‘Š | `.mmMuscleNeglected` | `#B388D4` | 7æ—¥+ |

### å¢ƒç•Œç·š

| ç”¨é€” | ã‚³ãƒ¼ãƒ‰ | Hex |
|:---|:---|:---|
| é€šå¸¸å¢ƒç•Œç·š | `.mmBorder` | `#808080`ï¼ˆã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯” 4.1:1ï¼‰ |
| ã‚¢ã‚¯ãƒ†ã‚£ãƒ–å¢ƒç•Œç·š | `.mmMuscleActiveBorder` | `#FFFFFF` |

### ã‚«ãƒ©ãƒ¼ä½¿ç”¨ãƒ«ãƒ¼ãƒ«

- ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã¯1ç”»é¢ã‚ãŸã‚Š**ç·é¢ç©ã®15%æœªæº€**
- ãƒ†ã‚­ã‚¹ãƒˆã¨èƒŒæ™¯ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã¯**WCAG AAåŸºæº– 4.5:1ä»¥ä¸Š**
- ç”»é¢ã®å·®åˆ¥åŒ–: ãƒ¡ã‚¤ãƒ³ç”»é¢=`.mmBgPrimary`ã€ãƒ¢ãƒ¼ãƒ€ãƒ«/ã‚·ãƒ¼ãƒˆ=`.mmBgSecondary`

### è‰²ã®è¨ˆç®—ï¼ˆColorCalculator.swiftï¼‰

```swift
enum MuscleVisualState: Equatable {
    case inactive                          // èƒŒæ™¯ã«æº¶ã‘è¾¼ã‚€ï¼ˆåˆºæ¿€ãªã— or å®Œå…¨å›å¾©ï¼‰
    case recovering(progress: Double)      // å›å¾©ä¸­ï¼ˆè‰²ã¨ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
    case neglected(fast: Bool)             // æœªåˆºæ¿€ï¼ˆfast = 14æ—¥ä»¥ä¸Šã§é«˜é€Ÿç‚¹æ»…ï¼‰
}
```

å›å¾©é€²æ—ã«å¿œã˜ã¦5æ®µéšÃ—20%ãƒãƒ³ãƒ‰ã§è‰²ã‚’è£œé–“:
- 0-20%: `.mmMuscleFatigued`ï¼ˆèµ¤ï¼‰
- 20-40%: èµ¤â†’é»„ è£œé–“
- 40-60%: é»„
- 60-80%: é»„â†’ç·‘ è£œé–“
- 80-100%: `.mmMuscleRecovered`ï¼ˆç·‘ï¼‰

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ç­‹è‚‰å®šç¾©ï¼ˆ21ç­‹è‚‰ï¼‰

```swift
enum Muscle: String, CaseIterable, Codable {
    // èƒ¸ï¼ˆ2ï¼‰
    case chestUpper = "chest_upper"
    case chestLower = "chest_lower"
    // èƒŒä¸­ï¼ˆ4ï¼‰
    case lats = "lats"
    case trapsUpper = "traps_upper"
    case trapsMiddleLower = "traps_middle_lower"
    case erectorSpinae = "erector_spinae"
    // è‚©ï¼ˆ3ï¼‰
    case deltoidAnterior = "deltoid_anterior"
    case deltoidLateral = "deltoid_lateral"
    case deltoidPosterior = "deltoid_posterior"
    // è…•ï¼ˆ3ï¼‰
    case biceps = "biceps"
    case triceps = "triceps"
    case forearms = "forearms"
    // ä½“å¹¹ï¼ˆ2ï¼‰
    case rectusAbdominis = "rectus_abdominis"
    case obliques = "obliques"
    // ä¸‹åŠèº«ï¼ˆ7ï¼‰
    case glutes = "glutes"
    case quadriceps = "quadriceps"
    case hamstrings = "hamstrings"
    case adductors = "adductors"
    case hipFlexors = "hip_flexors"
    case gastrocnemius = "gastrocnemius"
    case soleus = "soleus"
}
```

### å›å¾©è¨ˆç®—ï¼ˆãƒœãƒªãƒ¥ãƒ¼ãƒ ä¿‚æ•°ä»˜ãï¼‰

```swift
struct RecoveryCalculator {
    static func volumeCoefficient(sets: Int) -> Double {
        switch sets {
        case 1:     return 0.7
        case 2:     return 0.85
        case 3:     return 1.0
        case 4:     return 1.1
        default:    return 1.15
        }
    }

    static func recoveryProgress(stimulationDate: Date, muscle: Muscle, totalSets: Int) -> Double {
        let elapsed = Date().timeIntervalSince(stimulationDate) / 3600
        let needed = Double(muscle.baseRecoveryHours) * volumeCoefficient(sets: totalSets)
        return min(1.0, max(0.0, elapsed / needed))
    }
}
```

### Swift Data ãƒ¢ãƒ‡ãƒ«

```swift
@Model class WorkoutSession {
    var id: UUID
    var startDate: Date
    var endDate: Date?
    var note: String?
    @Relationship(deleteRule: .cascade) var sets: [WorkoutSet]
    var isActive: Bool { endDate == nil }
}

@Model class WorkoutSet {
    var id: UUID
    var session: WorkoutSession?
    var exerciseId: String
    var setNumber: Int
    var weight: Double
    var reps: Int
    var completedAt: Date
}

@Model class MuscleStimulation {
    var muscle: String
    var stimulationDate: Date
    var maxIntensity: Double
    var totalSets: Int
    var sessionId: UUID
}
```

### ç¨®ç›®ãƒ‡ãƒ¼ã‚¿ï¼ˆexercises.jsonï¼‰

`Resources/exercises.json` ã«ãƒãƒ³ãƒ‰ãƒ«åŒæ¢±ã€‚èµ·å‹•æ™‚ã«ExerciseStoreã«èª­ã¿è¾¼ã‚€ã€‚
**80ç¨®ç›®ã€EMGè«–æ–‡ãƒ™ãƒ¼ã‚¹ã§åˆºæ¿€åº¦%ã‚’ä¿®æ­£æ¸ˆã¿ã€‚**

---

## ç”»é¢æ§‹æˆ

```
TabBar
â”œâ”€â”€ ãƒ›ãƒ¼ãƒ ï¼ˆç­‹è‚‰ãƒãƒƒãƒ—ï¼‰         â† P0
â”œâ”€â”€ ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆï¼ˆè¨˜éŒ²ï¼‰          â† P0
â”œâ”€â”€ ç¨®ç›®è¾å…¸                    â† P1
â”œâ”€â”€ å±¥æ­´ï¼ˆãƒãƒƒãƒ—/ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼åˆ‡æ›¿ï¼‰ â† P1
â””â”€â”€ è¨­å®š                        â† P2

Modal / Push
â”œâ”€â”€ ä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ææ¡ˆ           â† P0
â”œâ”€â”€ ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆå®Ÿè¡Œä¸­           â† P0
â”œâ”€â”€ ç¨®ç›®è©³ç´°                    â† P1
â”œâ”€â”€ éƒ¨ä½è©³ç´°ï¼ˆ3Dï¼‰              â† P1
â”œâ”€â”€ å±¥æ­´ãƒãƒƒãƒ—éƒ¨ä½ã‚¿ãƒƒãƒ—â†’ãƒãƒ¼ãƒ•ãƒ¢ãƒ¼ãƒ€ãƒ« â† P1
â””â”€â”€ Paywall                     â† P1
```

---

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
MuscleMap/
â”œâ”€â”€ App/
â”œâ”€â”€ Models/
â”œâ”€â”€ Repositories/
â”œâ”€â”€ ViewModels/
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ Home/
â”‚   â”œâ”€â”€ Workout/
â”‚   â”œâ”€â”€ Exercise/
â”‚   â”œâ”€â”€ MuscleDetail/
â”‚   â”œâ”€â”€ History/
â”‚   â”œâ”€â”€ Onboarding/
â”‚   â”œâ”€â”€ Settings/
â”‚   â””â”€â”€ Paywall/
â”œâ”€â”€ Resources/
â”‚   â”œâ”€â”€ exercises.json
â”‚   â”œâ”€â”€ Assets.xcassets
â”‚   â””â”€â”€ 3DModels/
â””â”€â”€ Utilities/
    â”œâ”€â”€ RecoveryCalculator.swift
    â”œâ”€â”€ MenuSuggestionService.swift
    â”œâ”€â”€ ColorCalculator.swift
    â”œâ”€â”€ ColorExtensions.swift
    â””â”€â”€ DateExtensions.swift
```

---

## èª²é‡‘ï¼ˆRevenueCatï¼‰

```swift
// Entitlement: "premium"
// æœˆé¡: Â¥980/æœˆï¼ˆ7æ—¥é–“ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ï¼‰
// å¹´é¡: Â¥7,800/å¹´ï¼ˆ14æ—¥é–“ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ï¼‰â† æ¨å¥¨
// è²·ã„åˆ‡ã‚Š: Â¥12,000
```

---

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### MUSTï¼ˆå¿…é ˆï¼‰
- SwiftUI Only
- Swift Data ã§ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
- MVVM + Repository Pattern
- `@Observable` ãƒã‚¯ãƒ­ä½¿ç”¨ï¼ˆiOS 17+ï¼‰
- `async/await` ä½¿ç”¨
- æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆ

### MUST NOTï¼ˆç¦æ­¢ï¼‰
- UIKitä½¿ç”¨ï¼ˆSwiftUIã§ä»£æ›¿å¯èƒ½ãªå ´åˆï¼‰
- ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—ï¼ˆLocalizableå¯¾å¿œæº–å‚™ï¼‰
- 200è¡Œè¶…ã®Viewï¼ˆåˆ†å‰²ã™ã‚‹ï¼‰
- Force Unwrap (`!`) ã®ä¹±ç”¨
- muscleMappingæ•°å€¤ã‚’ã‚³ãƒ¼ãƒ‰ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ï¼ˆJSONã‹ã‚‰èª­ã‚€ï¼‰

### SHOULDï¼ˆæ¨å¥¨ï¼‰
- Preview Provider ã‚’å…¨Viewã«ç”¨æ„
- 8ã®å€æ•°ã§ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°
- Haptic Feedbackï¼ˆã‚»ãƒƒãƒˆå®Œäº†ã€ãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¦ãƒˆçµ‚äº†æ™‚ï¼‰

---

## ãƒ†ã‚¹ãƒˆ

- **MUST:** RecoveryCalculator ã®å…¨ãƒ¡ã‚½ãƒƒãƒ‰ã«Unit Test
- **MUST:** Repository ã®ãƒ‡ãƒ¼ã‚¿æ“ä½œã«ãƒ†ã‚¹ãƒˆ
- **MUST:** ExerciseStore ã®JSONèª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ
- **SHOULD:** ä¸»è¦ãƒ•ãƒ­ãƒ¼ã®UIãƒ†ã‚¹ãƒˆ
